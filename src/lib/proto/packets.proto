syntax = "proto3";

package packets;

message Packet {
  oneof data {
    Ping ping = 1;
    StartBenchmark startBenchmark = 2;
    StopBenchmark stopBenchmark = 3;
  }
}

message Datagram {
  oneof data {
    BenchmarkPayload benchmarkPayload = 1;
  }
}

message Ping {
  string data = 1;
}

message StartBenchmark {

}

message StopBenchmark {

}

message BenchmarkPayload {
  bytes payload = 1;
}

message ValidationToken {
  bytes payload = 1;
  bytes signature = 2;
}

message ValidationPayload {
  bytes salt = 1;
  uint64 secs = 2;
  IpAddress address = 3;
  uint32 port = 4;
  bytes dcid = 5;
}

message IpAddress {
  oneof address {
    bytes V4 = 1;
    bytes V6 = 2;
  }
}